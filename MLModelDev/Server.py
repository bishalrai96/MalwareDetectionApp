import pickle
import flask
from flask import render_template
from flask import request

app = flask.Flask(__name__)

ML_model = pickle.load(open("Model.pk1", 'rb'))

@app.route('/', methods =['POST', 'GET'])
def predict():
	permissions = []
	Value = []
	
	f = open ("data.csv", "w")
	f.write ("Type" + ",")

	with open(r"..\MLModelDev\permissionList.txt", "r") as file:
		for lines in file:
			lines = lines[:-1]
			permissions.append(lines);
	data = request.form
	
	idx = 0
	for per in permissions:
		if (per in data):
			Value.append(1)
		else:
			Value.append(0)

		idx = idx + 1

	print (Value)

	pred = ML_model.predict([Value])
	print(pred)
	return (pred[0])





if __name__ == '__main__':
	app.run(debug = True)
